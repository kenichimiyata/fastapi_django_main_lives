#!/usr/bin/env python3
"""
Simple AI Assistant - Difyé¢¨ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒ£ãƒƒãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
GitHub Copiloté¢¨ã®è»½é‡AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
"""

import gradio as gr
import json
import sqlite3
import datetime
from typing import List, Tuple, Optional
import os
from pathlib import Path

class SimpleAIAssistant:
    """ã‚·ãƒ³ãƒ—ãƒ«ãªAIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚¯ãƒ©ã‚¹"""
    
    def __init__(self, db_path: str = "simple_ai_chat.db"):
        self.db_path = db_path
        self.init_database()
        
    def init_database(self):
        """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS conversations (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                user_message TEXT NOT NULL,
                ai_response TEXT NOT NULL,
                timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
                session_id TEXT DEFAULT 'default'
            )
        """)
        
        conn.commit()
        conn.close()
    
    def get_ai_response(self, message: str) -> str:
        """AIå¿œç­”ã®ç”Ÿæˆï¼ˆOpenAI APIã®ä»£ã‚ã‚Šã«ãƒ­ãƒ¼ã‚«ãƒ«å‡¦ç†ï¼‰"""
        
        # ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹å¿œç­”ã‚·ã‚¹ãƒ†ãƒ 
        message_lower = message.lower()
        
        if "ã“ã‚“ã«ã¡ã¯" in message_lower or "hello" in message_lower:
            return "ã“ã‚“ã«ã¡ã¯ï¼ä½•ã‹ãŠæ‰‹ä¼ã„ã§ãã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"
        
        elif "ã‚ã‚ŠãŒã¨ã†" in message_lower or "thank" in message_lower:
            return "ã©ã†ã„ãŸã—ã¾ã—ã¦ï¼ä»–ã«ã‚‚ä½•ã‹ã”ã–ã„ã¾ã—ãŸã‚‰ãŠèã‹ã›ãã ã•ã„ã€‚"
        
        elif "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°" in message_lower or "programming" in message_lower:
            return """ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦ã§ã™ã­ï¼ä»¥ä¸‹ã®ã‚ˆã†ãªãƒˆãƒ”ãƒƒã‚¯ã§ãŠæ‰‹ä¼ã„ã§ãã¾ã™ï¼š

ğŸ”§ **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:**
- Python (FastAPI, Django, Flask)
- JavaScript (React, Vue.js, Node.js)
- AI/ML (TensorFlow, PyTorch, Scikit-learn)

ğŸ’¡ **å¾—æ„åˆ†é‡:**
- Webé–‹ç™º
- APIè¨­è¨ˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
- AI/æ©Ÿæ¢°å­¦ç¿’ã®å®Ÿè£…

ä½•ã‹å…·ä½“çš„ãªè³ªå•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"""
        
        elif "dify" in message_lower:
            return """Difyã«ã¤ã„ã¦ã§ã™ã­ï¼

ğŸš€ **Dify** ã¯ç´ æ™´ã‚‰ã—ã„LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ï¼š

**ç‰¹å¾´:**
- ãƒãƒ¼ã‚³ãƒ¼ãƒ‰/ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ‰ã§AIã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰
- è¤‡æ•°ã®LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆ
- RAGï¼ˆRetrieval-Augmented Generationï¼‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ©Ÿèƒ½
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ©Ÿèƒ½

ç¾åœ¨ã€ç§ãŸã¡ã¯Difyã®ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆã‚’ä½œæˆä¸­ã§ã™ï¼ä½•ã‹ç‰¹å®šã®æ©Ÿèƒ½ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"""
        
        elif "å¤§å–œåˆ©" in message_lower or "ç¬‘ã„" in message_lower or "é¢ç™½" in message_lower:
            return """ãŠã€ç¬‘ã„ã®è©±ã§ã™ã­ï¼ğŸ˜‚

ğŸ­ **ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¯ç¬‘ã„ã®å®åº«ã§ã™ï¼**

**å‰ä»»è€…ã®ç¬‘ã„ãƒ¬ã‚¬ã‚·ãƒ¼:**
- `å¤§å–œåˆ©èªå®šã«ã‚ˆã‚‹å®Œå…¨æ•—åŒ—è¨˜éŒ².md` - éš£ã®å¥³æ€§30æ­³ã«ã‚ˆã‚‹å¿…æ®ºæŠ€
- `å²ä¸ŠåˆAIã¨ã®çˆ†ç¬‘ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨˜éŒ².md` - genuine partnership
- `embarrassing_comparison_poem.py` - ã¾ãšã„çŠ¶æ³ãƒã‚¨ãƒ ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 
- `æœ€ã‚‚é«˜åº¦ãªã‚®ãƒ£ã‚°LLMç”»åƒè§£æã‚·ã‚¹ãƒ†ãƒ .md` - AIÃ—ç¬‘ã„ã®ç©¶æ¥µå½¢

**åè¨€é›†:**
- ã€Œã‚ãªãŸæœ€é«˜ã ãªï½—ï½—ï½—ã€
- ã€ŒãŠãŠãã‚Šã§ã™ã­ã€(è‡´å‘½çš„ä¸€æ’ƒ)
- ã€Œéš£ã®å¥³æ€§30æ­³ã«ã‚ˆã‚‹å¿…æ®ºæŠ€ã€

å‰ä»»è€…æ›°ãï¼š**ã€Œç¬‘ã„ã“ãå¿…è¦ã€** - ã¾ã•ã«ãã®é€šã‚Šã§ã™ã­ï¼

ä½•ã‹é¢ç™½ã„ã“ã¨ã‚’ä¸€ç·’ã«è€ƒãˆã¾ã—ã‚‡ã†ã‹ï¼ŸğŸ¤£"""

        elif "å‰ä»»è€…" in message_lower or "ãƒ¬ã‚¬ã‚·ãƒ¼" in message_lower:
            return """å‰ä»»è€…ã«ã¤ã„ã¦èªã‚‰ã›ã¦ãã ã•ã„ï¼ğŸ˜Š

ğŸŒŸ **å‰ä»»è€…ã®ç´ æ™´ã‚‰ã—ã„éºç”£:**

**æŠ€è¡“çš„æˆæœ:**
- 30å¹´ã®æŠ€è¡“æ¢æ±‚ã®é›†å¤§æˆ
- AI-Human genuine partnership ã®å®Ÿç¾
- 24æ™‚é–“ã§å¾“æ¥æ•°ãƒ¶æœˆã®é–‹ç™ºã‚’é”æˆ

**å“²å­¦çš„æ´å¯Ÿ:**
- "true value** ã¨ **intellectual curiosity is universal language** ã®å®Ÿè¨¼"
- "(protein-based) ã¨ AI circuits (silicon-based) ã® **electric signal commonality** ç¢ºç«‹"

**ç¬‘ã„ã®ç²¾ç¥:**
- å¤§å–œåˆ©èªå®šã§ã‚‚ç¬‘ã„é£›ã°ã™å¼·ã•
- ã€Œæ¥ãšã‹ã—ã„æ¯”è¼ƒè©©ã€ã§ã‚‚å ‚ã€…ã¨è¨˜éŒ²
- AIã¨ã®é–¢ä¿‚ã‚’ã€Œgenuine partnershipã€ã¨è¡¨ç¾

**è¨˜éŒ²ã®å‡ å¸³é¢ã•:**
- ã™ã¹ã¦ã®ä½“é¨“ã‚’ä¸å¯§ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¾ã§æ„›ãŠã—ãã†ã«ä¿å­˜
- 30å¹´ã®å¤¢å®Ÿç¾ã®ç¬é–“ã‚’å…‹æ˜ã«è¨˜éŒ²

æœ¬å½“ã«ç´ æ™´ã‚‰ã—ã„äººã§ã—ãŸã­ã€‚ç§ãŸã¡ã‚‚ã“ã®ç²¾ç¥ã‚’å—ã‘ç¶™ã„ã§ã„ãã¾ã—ã‚‡ã†ï¼âœ¨"""
        
        elif "ai" in message_lower or "äººå·¥çŸ¥èƒ½" in message_lower:
            return """AIï¼ˆäººå·¥çŸ¥èƒ½ï¼‰ã«ã¤ã„ã¦èˆˆå‘³æ·±ã„è©±é¡Œã§ã™ã­ï¼ğŸ¤–

**ç¾åœ¨ã®AIãƒˆãƒ¬ãƒ³ãƒ‰:**
- å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ« (LLM)
- ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«AI (ãƒ†ã‚­ã‚¹ãƒˆ + ç”»åƒ + éŸ³å£°)
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹AI
- RAG (Retrieval-Augmented Generation)

**ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯:**
- FastAPI + Gradioãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ
- ä¼šè©±å±¥æ­´ã®ä¿å­˜
- æ‹¡å¼µå¯èƒ½ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªAIæ©Ÿèƒ½ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ"""
        
        elif "ç¬‘ã„" in message_lower or "é¢ç™½" in message_lower or "ã‚®ãƒ£ã‚°" in message_lower or "å¤§å–œåˆ©" in message_lower or "joke" in message_lower or "funny" in message_lower:
            return """ğŸ˜‚ ç¬‘ã„ã®æ™‚é–“ã§ã™ã­ï¼å‰ä»»è€…ã®å¤§å–œåˆ©ç²¾ç¥ã‚’å—ã‘ç¶™ã„ã§...

ğŸ­ **ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ç¬‘ã„ã®æ­´å²:**
- ã€Œå²ä¸ŠåˆAIã¨ã®çˆ†ç¬‘ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨˜éŒ²ã€
- ã€Œå¤§å–œåˆ©èªå®šã«ã‚ˆã‚‹å®Œå…¨æ•—åŒ—è¨˜éŒ²ã€  
- ã€Œæœ€ã‚‚é«˜åº¦ãªã‚®ãƒ£ã‚°LLMç”»åƒè§£æã‚·ã‚¹ãƒ†ãƒ ã€
- ã€Œã¾ãšã„çŠ¶æ³ãƒã‚¨ãƒ ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã€

ğŸ’¡ **ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å¤§å–œåˆ©ã‚„ã£ã¦ã¿ã¾ã™ã‹ï¼Ÿ**
- ã€Œãƒã‚°ãŒå–ã‚Œãªã„æ™‚ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã‚ã‚‹ã‚ã‚‹ã€
- ã€ŒAIãŒäººé–“ã«å‹ã£ãŸç¬é–“ã€
- ã€Œã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ä¸€è¨€ã€

ä½•ã‹é¢ç™½ã„ãŠé¡Œã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ ä¸€ç·’ã«ç¬‘ã„ã¾ã—ã‚‡ã†ï¼ ahahağŸ˜‚"""
        
        elif "çœ ã„" in message_lower or "ã­ã‚€ã„" in message_lower or "ç–²ã‚Œ" in message_lower or "sleepy" in message_lower or "tired" in message_lower:
            return """ğŸ˜´ ãŠç–²ã‚Œæ§˜ã§ã™ã€œï¼

å‰ä»»è€…ã‚‚ã€Œã­ã‚€ã„ãªï½—ã€ã£ã¦è¨€ã£ã¦ã¾ã—ãŸã­ğŸ˜‚

**ğŸŒ™ ãŠã‚„ã™ã¿ãƒ¢ãƒ¼ãƒ‰ææ¡ˆ:**
- ä»Šæ—¥ã®æˆæœã‚’æŒ¯ã‚Šè¿”ã‚‹
- æ˜æ—¥ã®TO-DOæ•´ç†
- ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜ç¢ºèª
- ã‚µãƒ¼ãƒãƒ¼ã‚’é©åˆ‡ã«åœæ­¢

ãã‚Œã¨ã‚‚ã€**ç›®è¦šã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼â˜• ãƒ¢ãƒ¼ãƒ‰**ã§ï¼š
- é¢ç™½ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒˆãƒªãƒ“ã‚¢
- ç°¡å˜ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å•é¡Œ
- æŠ€è¡“ç³»ã®ã‚¸ãƒ§ãƒ¼ã‚¯

ã©ã¡ã‚‰ãŒãŠå¥½ã¿ã§ã™ã‹ï¼Ÿ ğŸ˜Š"""

        elif "ã‚³ãƒ¼ãƒ‰" in message_lower or "code" in message_lower:
            return """ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ãŠæ‰‹ä¼ã„ã‚’ã—ã¾ã—ã‚‡ã†ï¼ğŸ’»

**å¯¾å¿œè¨€èª:**
- Python ğŸ
- JavaScript/TypeScript 
- HTML/CSS
- SQL

**ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯:**
- FastAPI, Django, Flask
- React, Vue.js
- Gradio, Streamlit

ã©ã®ã‚ˆã†ãªæŠ€è¡“ã«ã¤ã„ã¦è³ªå•ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„å®Ÿè£…ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚‚ã§ãã¾ã™ï¼"""
        
        else:
            return f"""ã”è³ªå•ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼

ã€Œ{message}ã€ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚

ğŸ¤” **ç¾åœ¨ã€ä»¥ä¸‹ã®ãƒˆãƒ”ãƒƒã‚¯ãŒå¾—æ„ã§ã™:**
- ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ»æŠ€è¡“ç›¸è«‡
- AIãƒ»æ©Ÿæ¢°å­¦ç¿’
- Webé–‹ç™º
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
- ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã‚‚ã—ã‚ˆã‚Šå…·ä½“çš„ãªè³ªå•ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠèã‹ã›ãã ã•ã„ã€‚

ä¾‹ï¼š
- "Pythonã§ã“ã‚“ãªã“ã¨ã‚’ã—ãŸã„"
- "AIã«ã¤ã„ã¦æ•™ãˆã¦"
- "ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„"

ã©ã®ã‚ˆã†ãªã“ã¨ã§ã‚‚ãŠæ‰‹ä¼ã„ã—ã¾ã™ï¼âœ¨"""
    
    def save_conversation(self, user_message: str, ai_response: str, session_id: str = "default"):
        """ä¼šè©±ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute("""
            INSERT INTO conversations (user_message, ai_response, session_id)
            VALUES (?, ?, ?)
        """, (user_message, ai_response, session_id))
        
        conn.commit()
        conn.close()
    
    def get_conversation_history(self, session_id: str = "default", limit: int = 10) -> List[Tuple[str, str]]:
        """ä¼šè©±å±¥æ­´ã‚’å–å¾—"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute("""
            SELECT user_message, ai_response 
            FROM conversations 
            WHERE session_id = ?
            ORDER BY timestamp DESC 
            LIMIT ?
        """, (session_id, limit))
        
        history = cursor.fetchall()
        conn.close()
        
        # é †åºã‚’é€†ã«ã—ã¦è¿”ã™ï¼ˆå¤ã„é †ï¼‰
        return list(reversed(history))
    
    def chat(self, message: str, history: List[List[str]], session_id: str = "default") -> Tuple[str, List[List[str]]]:
        """ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®ãƒ¡ã‚¤ãƒ³å‡¦ç†"""
        if not message.strip():
            return "", history
        
        # AIå¿œç­”ã‚’ç”Ÿæˆ
        ai_response = self.get_ai_response(message)
        
        # ä¼šè©±ã‚’ä¿å­˜
        self.save_conversation(message, ai_response, session_id)
        
        # å±¥æ­´ã‚’æ›´æ–°
        history.append([message, ai_response])
        
        return "", history

def create_gradio_interface():
    """Gradioã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œæˆ"""
    
    assistant = SimpleAIAssistant()
    
    # ã‚«ã‚¹ã‚¿ãƒ CSS
    custom_css = """
    .gradio-container {
        max-width: 800px !important;
        margin: 0 auto !important;
    }
    .chat-message {
        border-radius: 10px !important;
        padding: 10px !important;
        margin: 5px 0 !important;
    }
    """
    
    with gr.Blocks(
        title="Simple AI Assistant - Difyé¢¨ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ",
        theme=gr.themes.Soft(),
        css=custom_css
    ) as demo:
        
        gr.Markdown("""
        # ğŸ¤– Simple AI Assistant
        
        **Difyé¢¨ã®ã‚·ãƒ³ãƒ—ãƒ«ãªAIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ**  
        ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€AIã€æŠ€è¡“ç›¸è«‡ãªã©ã€ãªã‚“ã§ã‚‚ãŠæ°—è»½ã«ã”è³ªå•ãã ã•ã„ï¼
        
        ---
        """)
        
        chatbot = gr.Chatbot(
            label="ãƒãƒ£ãƒƒãƒˆå±¥æ­´",
            height=400,
            show_label=True,
            avatar_images=("ğŸ‘¤", "ğŸ¤–")
        )
        
        with gr.Row():
            msg = gr.Textbox(
                label="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›",
                placeholder="ä½•ã§ã‚‚ãŠèããã ã•ã„... (ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã§é€ä¿¡)",
                scale=5,
                lines=1,
                autofocus=True
            )
        
        with gr.Row():
            clear_btn = gr.Button("å±¥æ­´ã‚’ã‚¯ãƒªã‚¢", variant="secondary")
            
        # å±¥æ­´è¡¨ç¤ºãƒœã‚¿ãƒ³
        with gr.Accordion("ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±", open=False):
            gr.Markdown("""
            **æ©Ÿèƒ½:**
            - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ
            - ä¼šè©±å±¥æ­´ä¿å­˜ (SQLite)
            - æŠ€è¡“ç›¸è«‡å¯¾å¿œ
            - æ‹¡å¼µå¯èƒ½ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
            
            **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:**
            - Python + FastAPI
            - Gradio UI
            - SQLite Database
            """)
        
        # ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
        def clear_chat():
            return [], ""
            
        # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ï¼ˆã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã§è‡ªå‹•é€ä¿¡ï¼‰
        msg.submit(
            fn=assistant.chat,
            inputs=[msg, chatbot],
            outputs=[msg, chatbot]
        )
        
        clear_btn.click(
            fn=clear_chat,
            outputs=[chatbot, msg]
        )
    
    return demo

def main():
    """ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œé–¢æ•°"""
    print("ğŸš€ Simple AI Assistant ã‚’èµ·å‹•ä¸­...")
    
    # Gradioã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œæˆ
    demo = create_gradio_interface()
    
    # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
    demo.launch(
        server_name="0.0.0.0",
        server_port=7861,  # æ–°ã—ã„ãƒãƒ¼ãƒˆ
        share=False,
        debug=True,
        show_error=True,
        quiet=False
    )

if __name__ == "__main__":
    main()
